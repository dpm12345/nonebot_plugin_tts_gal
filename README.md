
<p align="center">
  <a href="https://v2.nonebot.dev/"><img src="https://v2.nonebot.dev/logo.png" width="200" height="200" alt="nonebot"></a>
</p>

<div align="center">

# nonebot-plugin-tts-gal

_âœ¨ [Nonebot2](https://github.com/nonebot/nonebot2) åŸºäºnonebot2å’Œvitsçš„æœ¬åœ°åŒ–è§’è‰²è¯­éŸ³åˆæˆæ’ä»¶ âœ¨_

<p align="center">
  <a href="https://github.com/dpm12345/nonebot_plugin_tts_gal/blob/master/LICENSE">
    <img src="https://img.shields.io/github/license/dpm12345/nonebot_plugin_tts_gal.svg" alt="license">
  </a>
  <img src="https://img.shields.io/badge/python-3.8+-blue.svg" alt="Python">
  <img src="https://img.shields.io/badge/nonebot-2.0.0b4+-red.svg" alt="NoneBot">
  <a href="https://pypi.org/project/nonebot-plugin-tts-gal">
    <img src="https://badgen.net/pypi/v/nonebot-plugin-tts-gal" alt="pypi">
  </a>
</p>

</div>

# NOTE: å› å­¦ä¸šç¹å¿™, ç°æš‚åœç»´æŠ¤

## ğŸ’¬ å‰è¨€

å¹³æ—¶å› ä¸ºå­¦ä¸šé—®é¢˜ï¼Œæœ‰æ—¶å¯èƒ½ä¼šå›å¤å¾—æ¯”è¾ƒæ…¢ï¼Œè¯·è§è°…ã€‚

## ğŸ“– ä»‹ç»

vitsçš„nonebotçš„æœ¬åœ°åŒ–æ’ä»¶ï¼Œä½¿ç”¨å·²è®­ç»ƒå¥½çš„æ¨¡å‹ï¼ŒæŒ‰ç…§é…ç½®è¦æ±‚ï¼Œä½¿æœºå™¨äººå‘é€æ–‡æœ¬å¯¹åº”çš„è¯­éŸ³

(**PS: è¯­éŸ³ç”Ÿæˆæ¯”è¾ƒåƒé…ç½®ï¼Œç”Ÿæˆè¿‡ç¨‹èŠ±è´¹æ—¶é—´å¯èƒ½ä¼šæ¯”è¾ƒé•¿ï¼Œä¸”å¤§æ–‡æœ¬é‡ä¼šå ç”¨è¾ƒå¤§å†…å­˜ï¼Œè¿‡å¤§ä¼šå¯¼è‡´æœºå™¨äººè¿›ç¨‹ killed ï¼Œè¯·ç•™æ„**)

## ğŸ’¿ å®‰è£…

<details>
<summary>nb-cliå®‰è£…</summary>
åœ¨ nonebot2 é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ‰“å¼€å‘½ä»¤è¡Œ, è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤å³å¯å®‰è£…

    nb plugin install nonebot-plugin-tts-gal

</details>

<details>
<summary>pipå®‰è£…</summary>

    pip install nonebot_plugin_tts_gal

</details>

## ğŸ° èµ„æºæ–‡ä»¶

`data`æ–‡ä»¶å¤¹ä¸­çš„`nonebot_plugin_tts_gal`ä¼šå­˜å‚¨ä¸æ’ä»¶æœ‰å…³çš„æ–‡ä»¶

å¯ä»¥å®‰è£…å®Œæ’ä»¶åè¿è¡Œä¸€æ¬¡è‡ªåŠ¨å»ºç«‹å†é€€å‡º

ä¹Ÿå¯ä»¥æŒ‰ç…§è¯¥é¡µé¢çš„`data`æ–‡ä»¶å¤¹è¿›è¡Œæ‰‹åŠ¨å»ºç«‹

å…·ä½“çš„èµ„æºä¸‹è½½ç¤ºä¾‹è¯·æŸ¥çœ‹[ä¾‹å­ç¤ºä¾‹](https://github.com/dpm12345/nonebot_plugin_tts_gal/blob/master/Usage.md#%E4%BE%8B%E5%AD%90%E7%A4%BA%E4%BE%8B)

## ğŸ’» ç›¸å…³ä¾èµ–

<details>
<summary>ffmpegçš„å®‰è£…</summary> 

**Windows**

åœ¨ffmpegå®˜ç½‘[ä¸‹è½½](https://github.com/BtbN/FFmpeg-Builds/releases),é€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬ï¼Œä¸‹è½½åè§£å‹ï¼Œå¹¶å°†ä½äº`bin`ç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­

å…¶ä»–å…·ä½“ç»†èŠ‚å¯è‡ªè¡Œæœç´¢

**Linux**

Ubuntuä¸‹

```
apt-get install ffmpeg
```

æˆ–è€…ä¸‹è½½æºç å®‰è£…(å…·ä½“å¯æœç´¢ç›¸å…³æ•™ç¨‹)

</details>

## âš™ï¸ é…ç½®

| é…ç½®é¡¹  | å¿…å¡« | ç±»å‹ | é»˜è®¤å€¼ |  è¯´æ˜  |
| :-----: | :--: | :----: | :----: | :-----: |
| tts_gal |  æ˜¯  | Dict[Tuble[str],List[str]] | {():[""]} | ç”ŸæˆæŒ‡å®šè§’è‰²è¯­éŸ³çš„å…³é”®é…ç½®ï¼Œå…·ä½“å¯è§[tts_galçš„é…ç½®è¦æ±‚](https://github.com/dpm12345/nonebot_plugin_tts_gal/blob/master/Usage.md#%E6%9C%BA%E5%99%A8%E4%BA%BA%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A6%81%E6%B1%82) |
| auto_delete_voice | å¦ | Bool | True | æ˜¯å¦è‡ªåŠ¨åˆ é™¤ç”Ÿæˆè¯­éŸ³ï¼Œ`True`ä¸ºæ˜¯ï¼Œ`False`ä¸ºå¦ |
| decibel | å¦ | int | -10 | å‘é€è¯­éŸ³ç›¸å¯¹ç”Ÿæˆçš„åˆ†è´æ•°<br>(åŸç”Ÿæˆçš„éŸ³é¢‘éŸ³é‡å¯èƒ½æ¯”è¾ƒå¤§ï¼Œå› æ­¤é€šè¿‡æ­¤é¡¹æ¥é™ä½ï¼Œè´Ÿæ•°ä¸ºé™ï¼Œæ•´æ•°ä½å‡) |
| tts_gal_is_at | å¦ | Bool | True | ä½¿ç”¨è¯¥åŠŸèƒ½æ˜¯å¦éœ€è¦@æœºå™¨äºº |
| tts_gal_prefix | å¦ | str | ""(ç©º) | ä½¿ç”¨è¯¥æ’ä»¶æ—¶çš„è§¦å‘åŒ¹é…å‰ç¼€ï¼Œå‡å°‘å†²çª |
| tts_gal_priority | å¦ | int | 3 | è¯¥æ’ä»¶çš„ä¼˜å…ˆçº§å¤§å° |
| tts_gal_tran_type | å¦ | List[str] | ["youdao"] | æ–‡æœ¬ç¿»è¯‘ä½¿ç”¨é¡¹ï¼Œé»˜è®¤ä¸ºæœ‰é“ç¿»è¯‘("youdao")ï¼Œå¯æ”¯æŒç™¾åº¦ç¿»è¯‘("baidu")å’Œè…¾è®¯ç¿»è¯‘("tencent")ï¼Œå¡«å†™é¡ºåºä¸ºç¿»è¯‘è°ƒç”¨ä¼˜å…ˆçº§ï¼Œè‹¥å¡«å†™ç™¾åº¦å’Œè…¾è®¯ç¿»è¯‘åéœ€å¡«å†™å¯¹åº”çš„é…ç½®é¡¹ |
| baidu_tran_appid | å¦ | str | ""(ç©º) | ç™¾åº¦ç¿»è¯‘æ¥å£å¯¹åº”çš„appidï¼Œå¯åœ¨[ç™¾åº¦ç¿»è¯‘æ§åˆ¶å°](https://fanyi-api.baidu.com/manage/developer)è·å– |
| baidu_tran_apikey | å¦ | str | ""(ç©º) | ç™¾åº¦ç¿»è¯‘æ¥å£å¯¹åº”çš„apikeyï¼Œå¯åœ¨[ç™¾åº¦ç¿»è¯‘æ§åˆ¶å°](https://fanyi-api.baidu.com/manage/developer)è·å– |
| tencent_tran_region | å¦ | str | "ap-shanghai" | è…¾è®¯ç¿»è¯‘æ¥å£å¯¹åº”çš„åœ°åŸŸï¼Œå¯åœ¨[åœ°åŸŸåˆ—è¡¨](https://cloud.tencent.com/document/api/551/15615#.E5.9C.B0.E5.9F.9F.E5.88.97.E8.A1.A8)è·å– |
| tencent_tran_secretid | å¦ | str | ""(ç©º) | è…¾è®¯ç¿»è¯‘æ¥å£å¯¹åº”secretidï¼Œå¯åœ¨[äº‘APIå¯†é’¥](https://console.cloud.tencent.com/capi)è·å– |
| tencent_tran_secretkey | å¦ | str | ""(ç©º) | è…¾è®¯ç¿»è¯‘æ¥å£å¯¹åº”secretkeyï¼Œå¯åœ¨[äº‘APIå¯†é’¥](https://console.cloud.tencent.com/capi)è·å– |
| tencent_tran_projectid | å¦ | int | 0 | è…¾è®¯ç¿»è¯‘æ¥å£å¯¹åº”projectidï¼Œè¯¥é¡¹å¯ä»¥æ ¹æ®æ§åˆ¶å°-è´¦å·ä¸­å¿ƒ-é¡¹ç›®ç®¡ç†ä¸­çš„é…ç½®å¡«å†™ï¼Œå¦‚æ— é…ç½®è¯·å¡«å†™é»˜è®¤é¡¹ç›®ID:0æˆ–ä¸å¡« |


## ğŸ‰ ä½¿ç”¨

ç¾¤èŠå’Œç§èŠä»…æœ‰ç»†å¾®å·®åˆ«ï¼Œå…¶ä¸­ä¸‹é¢è¯­å¥ä¸­ï¼Œ`name`ä¸ºåˆæˆè¯­éŸ³çš„è§’è‰²ï¼Œ`text`ä¸ºè½¬è¯­éŸ³çš„æ–‡æœ¬å†…å®¹(æ ¹æ®æ¨¡å‹é…ç½®æ–‡ä»¶ä¸­çš„`language`ä¼šè‡ªåŠ¨ç¿»è¯‘ä¸ºå¯¹åº”è¯­è¨€)ï¼Œå…·ä½“çš„ç›¸å…³åŠŸèƒ½è§£é‡Šå¯æŸ¥çœ‹[è¿™é‡Œ](https://github.com/dpm12345/nonebot_plugin_tts_gal/blob/master/Usage.md#%E5%8A%9F%E8%83%BD%E8%A7%A3%E9%87%8A)

| æŒ‡ä»¤ | å¯ä½¿ç”¨è€… |  è¯´æ˜   |
| :---: | :----: | :-----: |
| [name]è¯´[text]<br>æˆ–<br>[name]å‘é€[text] | æ‰€æœ‰äºº | ç”Ÿæˆè¯­éŸ³ï¼Œ<br>è‹¥é…ç½®äº†`tts_gal_is_at`ä¸º`true`å’Œ`tts_gal_prefix`ä¸ä¸ºç©ºï¼Œ<br>é‚£ä¹ˆåˆ†åˆ«è¦@æœºå™¨äººå’Œåœ¨`name`å‰æ·»åŠ é…ç½®çš„å‰ç¼€ï¼Œ<br>å¦‚è®¾ç½®å‰ç¼€`tts`ï¼Œé‚£ä¹ˆä½¿ç”¨æ—¶ä¸º tts[name]è¯´[text] |
| ç¦ç”¨ç¿»è¯‘ xxx | è¶…çº§ç”¨æˆ·(SUPERUSER) | ç¦ç”¨åä¸ºxxxçš„ç¿»è¯‘é¡¹ï¼Œåœ¨å¯ç”¨å‰éƒ½ä¸ä¼šä½¿ç”¨xxxçš„ç¿»è¯‘ |
| å¯ç”¨ç¿»è¯‘ xxx | è¶…çº§ç”¨æˆ·(SUPERUSER) | å¯ç”¨åä¸ºxxxçš„ç¿»è¯‘é¡¹ï¼Œå°†ä¼šä½¿ç”¨xxxçš„ç¿»è¯‘(æŒ‰åŸæ¥é…ç½®è®¾ç½®çš„ä¼˜å…ˆçº§) |
| æŸ¥çœ‹ç¿»è¯‘ | è¶…çº§ç”¨æˆ·(SUPERUSER) | æŸ¥çœ‹æ’ä»¶ç›®å‰è°ƒç”¨çš„ç¿»è¯‘é¡¹ |
| æŸ¥çœ‹ç¦ç”¨ç¿»è¯‘ | è¶…çº§ç”¨æˆ·(SUPERUSER) | æŸ¥çœ‹æ’ä»¶ç›®å‰ç¦ç”¨çš„ç¿»è¯‘é¡¹ |

ä¾‹å¦‚ï¼š
+ å®å®è¯´ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™.
+ ç¦ç”¨ç¿»è¯‘ baidu
+ å¯ç”¨ç¿»è¯‘ baidu
+ æŸ¥çœ‹ç¿»è¯‘
+ æŸ¥çœ‹ç¦ç”¨ç¿»è¯‘

## âœï¸ ä»Šå

æ·»åŠ æ›´å¤šçš„æ¨¡å‹

æ·»åŠ æ›´å¤šçš„ç¿»è¯‘é€‰é¡¹


## â” Q&A

<details>
<summary>å®‰è£…pyopenjtalk</summary> 

å¦‚æœå‡ºç°å¦‚ä¸‹é”™è¯¯

<img src="./images/nonebot_plugin_tts_gal_3.jpg" alt="å›¾3" style="zoom:80%;" />

å¯èƒ½ç”±äºç¼ºå°‘cmakeå’ŒMSVCé€ æˆçš„ï¼Œéœ€è¦åœ¨æœ¬æœºå®‰è£…

## Windows

### ç¬¬ä¸€æ­¥ å®‰è£…Visual Studio

åœ¨Visual Studioçš„å®˜ç½‘ä¸‹è½½å®‰è£…å™¨,[VS2022ç‚¹å‡»æ­¤å¤„ä¸‹è½½](https://visualstudio.microsoft.com/zh-hans/free-developer-offers/)

ä¸‹è½½ç¤¾åŒºç‰ˆï¼Œå³`Visual Studio Community`

### ç¬¬äºŒæ­¥ ä¸‹è½½ç›¸å…³å·¥å…·

ä¸‹è½½åç‚¹å‡»ï¼Œè¿›å…¥å¦‚å›¾æ‰€ç¤ºå…ˆç‚¹å‡»ä¿®æ”¹ï¼Œç„¶åé€‰æ‹©å¦‚å›¾æ‰€ç¤ºçš„é¡¹ç›®

<img src="./images/nonebot_plugin_tts_gal_1.jpg" alt="å›¾1" style="zoom:50%;" />

<img src="./images/nonebot_plugin_tts_gal_2.jpg" alt="å›¾2" style="zoom:50%;" />

### ç¬¬ä¸‰æ­¥ è®¾ç½®ç¯å¢ƒå˜é‡

ä¸‹è½½å¥½åï¼Œåœ¨å®‰è£…ç›®å½•ä¸­æ‰¾åˆ°cmakeå’ŒMSVCçš„binç›®å½•

ä¸‹é¢æ˜¯å‚è€ƒç›®å½•,å‰é¢çš„ç›®å½•å³ä¸ºä¹‹å‰å¼ºè°ƒçš„è·¯å¾„

```
E:\Program Files (x86)\Microsoft Visual Studio\2022\Community\Common7\IDE\CommonExtensions\Microsoft\CMake\CMake\bin

E:\Program Files (x86)\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.32.31326\bin\Hostx86\x64

```

å°†è¿™ä¸¤ä¸ªç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­

è¿™æ ·ï¼Œwindowså®‰è£…pyopenjtalkçš„å‰ç½®ä¾èµ–ä¾¿è§£å†³äº†

## Linux

Linuxå¦‚å‡ºç°ä»¥ä¸‹æƒ…å†µ

<img src="./images/nonebot_plugin_tts_gal_4.jpg" alt="å›¾4" style="zoom:50%;" />

åŸå› ä¸ºç¼ºå°‘cmakeå·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨aptå‘½ä»¤ä¸‹è½½å®‰è£…

```
sudo apt install cmake
```

å®‰è£…å¥½åä¾¿å¯å®‰è£…pyopenjtalk
</details>

</details>

<details>
<summary>æ— æ³•ç”Ÿæˆè¯­éŸ³</summary> 

å¦‚æœå‡ºç°ä¸‹è½½open_jtalkçš„é”™è¯¯ä¿¡æ¯ï¼Œå¯ä»¥å†æ¬¡å°è¯•ï¼Œå¦‚æœå®åœ¨ä¸è¡Œï¼Œå¯ä»¥ä½¿ç”¨`pip install openjtalk`

</details>

## ğŸ’¡ é¸£è°¢

+ éƒ¨åˆ†ä»£ç å‚è€ƒè‡ª[nonebot-plugin-petpet](https://github.com/noneplugin/nonebot-plugin-petpet)
+ **[CjangCjengh](https://github.com/CjangCjengh/)**ï¼šg2pè½¬æ¢ï¼Œé€‚ç”¨äºæ—¥è¯­è°ƒå½¢æ ‡æ³¨çš„ç¬¦å·æ–‡ä»¶åŠåˆ†äº«çš„[æŸšå­ç¤¾å¤šäººæ¨¡å‹](https://github.com/CjangCjengh/TTSModels)
+ **[luoyily](https://github.com/luoyily)**ï¼šåˆ†äº«çš„[ATRIæ¨¡å‹](https://pan.baidu.com/s/1_vhOx50OE5R4bE02ZMe9GA?pwd=9jo4)

## ğŸ“ æ›´æ–°æ—¥å¿—

**2023.4.19 version 0.3.11ï¼š**

fix bug [#41](https://github.com/dpm12345/nonebot_plugin_tts_gal/issues/41)

**2023.4.18 version 0.3.10ï¼š**

ä¿®æ”¹éƒ¨åˆ†ä»£ç 

**2023.4.9 version 0.3.9ï¼š**

æ”¯æŒæ·»åŠ ç”Ÿæˆsymbolsçš„ä»£ç ï¼Œä»¥ä¾¿æ·»åŠ æ›´å¤šçš„symbols,è¯¦è§[Usage.md](https://github.com/dpm12345/nonebot_plugin_tts_gal/blob/master/Usage.md#%E5%85%B3%E4%BA%8Esymbols)

fix bug [#39](https://github.com/dpm12345/nonebot_plugin_tts_gal/issues/39)

**2023.1.12 version 0.3.8ï¼š**

ä¿®å¤regexçš„åŒ¹é…é—®é¢˜

**2023.1.11 version 0.3.7ï¼š**

æ”¯æŒç™¾åº¦ç¿»è¯‘å’Œè…¾è®¯ç¿»è¯‘çš„apiä½¿ç”¨ï¼Œå¢åŠ æ˜¯å¦éœ€è¦@æœºå™¨äººã€è‡ªå®šä¹‰å‰ç¼€ã€è‡ªå®šä¹‰æ’ä»¶priorityç­‰é…ç½®

**2022.12.9 version 0.3.3ï¼š**

è‡ªåŠ¨è¯»å–å·²åŠ è½½çš„è§’è‰²æ¨¡å‹ï¼Œå¯é€šè¿‡[PicMenuæ’ä»¶](https://github.com/hamo-reid/nonebot_plugin_PicMenu)è¿›è¡Œæ˜¾ç¤ºå¯ä½¿ç”¨çš„è§’è‰²;å¯¹ä»£ç è¿›è¡Œç›¸å…³ä¼˜åŒ–

**2022.10.27 version 0.3.2ï¼š**

ä¿®æ”¹æ­£åˆ™è¡¨è¾¾å¼ï¼Œé¿å…æ–‡æœ¬å‡ºç°"è¯´/å‘é€"è€Œé€ æˆnameçš„åŒ¹é…é”™è¯¯

**2022.10.21 version 0.3.1ï¼š**

ä¿®å¤å¯¹é…ç½®é¡¹auto_delete_voiceçš„åˆ¤æ–­bug

**2022.10.19 version 0.3.0ï¼š**

æ”¯æŒæ·»åŠ ä¸­æ–‡æ¨¡å‹ï¼Œä¼˜åŒ–ç›¸å…³ä»£ç ï¼Œå¢æ·»æ›´å¤šæç¤º

**2022.10.7 version 0.2.3:**

é€‚é…nonebot2-rc1ç‰ˆæœ¬ï¼Œå¹¶æ·»åŠ éƒ¨åˆ†æŠ¥é”™ä¿¡æ¯æé†’

**2022.9.28 version 0.2.2:**

æ·»åŠ ä¸­æ–‡é€—å·æ›¿æ¢æˆè‹±æ–‡é€—å·

**version 0.2.1:**

å°†pyopenjtalkä¾èµ–æ›´æ–°ä¸º0.3.0ï¼Œä½¿python3.10ä¹Ÿèƒ½ä½¿ç”¨

**2022.9.25 version 0.2.0:**

ä¼˜åŒ–ä¿®æ”¹ä»£ç é€»è¾‘ï¼Œæ”¯æŒè‡ªè¡Œæ·»åŠ vitsæ¨¡å‹ï¼Œç®€å•ä¿®å¤äº†ä¸€ä¸‹æœ‰é“ç¿»è¯‘çš„ç¿»è¯‘é—®é¢˜ï¼Œå¯åŠ¨æ—¶è‡ªåŠ¨æ£€æµ‹æ‰€éœ€æ–‡ä»¶æ˜¯å¦ç¼ºå¤±

**2022.9.21 version 0.1.1:**

ä¿®æ”¹ä¾èµ–

